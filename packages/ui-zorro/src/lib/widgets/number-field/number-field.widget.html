<ng-template let-control="control" let-schema="schema" let-model="model" [fluentContextGuard]="contextGuard">
  @let addonBefore = schema.addons?.before | reactive: model : schema : control | template;
  @let addonAfter = schema.addons?.after | reactive: model : schema : control | template;
  @let prefix = schema.affixes?.prefix | reactive: model : schema : control | template;
  @let suffix = schema.affixes?.suffix | reactive: model : schema : control | template;

  @if (ControlWrapperDirective | inject: { optional: true }) {
    @if (!(schema.hidden | reactive: model : schema : control)) {
      <nz-input-number
        #component
        fluentCol
        [fluentBindingComponent]="component"
        [fluentBindingSchema]="schema"
        [fluentBindingControl]="control"
        [fluentBindingModel]="model"
        [formControl]="control"
        [class]="schema.class"
        [style]="schema.style"
        [span]="schema.col | col: 'span'"
        [flex]="schema.col | col: 'flex'"
        [offset]="schema.col | col: 'offset'"
        [nzId]="schema.id!"
        [nzMax]="schema.range?.max ?? infinity"
        [nzMin]="schema.range?.min ?? -infinity"
        [nzPlaceHolder]="(schema.placeholder | reactive: model : schema : control) ?? ''"
        [nzPrecision]="schema.precision!"
        [nzStep]="schema.step ?? 1"
        [nzAutoFocus]="schema.autofocus"
        [nzReadOnly]="schema.readonly | reactive: model : schema : control"
        [nzSize]="schema.size!"
        [nzStatus]="(control | status)()"
        [nzVariant]="schema.variant ?? 'outlined'">
        @if (addonBefore) {
          <ng-template
            nzInputAddonBefore
            [fluentTemplateOutlet]="addonBefore"
            [fluentTemplateOutletContext]="{ control, schema, model }"
            >{{ addonBefore }}</ng-template
          >
        }
        @if (addonAfter) {
          <ng-template
            nzInputAddonAfter
            [fluentTemplateOutlet]="addonAfter"
            [fluentTemplateOutletContext]="{ control, schema, model }"
            >{{ addonAfter }}</ng-template
          >
        }
        @if (prefix) {
          <ng-template
            nzInputPrefix
            [fluentTemplateOutlet]="prefix"
            [fluentTemplateOutletContext]="{ control, schema, model }"
            >{{ prefix }}</ng-template
          >
        }
        @if (suffix) {
          <ng-template
            nzInputSuffix
            [fluentTemplateOutlet]="suffix"
            [fluentTemplateOutletContext]="{ control, schema, model }"
            >{{ suffix }}</ng-template
          >
        }
      </nz-input-number>
    }
  } @else {
    <nz-input-number
      #component
      [fluentBindingComponent]="component"
      [fluentBindingSchema]="schema"
      [fluentBindingControl]="control"
      [fluentBindingModel]="model"
      [formControl]="control"
      [class]="schema.class"
      [style]="schema.style"
      [nzId]="schema.id!"
      [nzMax]="schema.range?.max ?? infinity"
      [nzMin]="schema.range?.min ?? -infinity"
      [nzPlaceHolder]="(schema.placeholder | reactive: model : schema : control) ?? ''"
      [nzPrecision]="schema.precision!"
      [nzStep]="schema.step ?? 1"
      [nzAutoFocus]="schema.autofocus"
      [nzReadOnly]="schema.readonly | reactive: model : schema : control"
      [nzSize]="schema.size!"
      [nzStatus]="(control | status)()"
      [nzVariant]="schema.variant ?? 'outlined'">
      @if (addonBefore) {
        <ng-template
          nzInputAddonBefore
          [fluentTemplateOutlet]="addonBefore"
          [fluentTemplateOutletContext]="{ control, schema, model }"
          >{{ addonBefore }}</ng-template
        >
      }
      @if (addonAfter) {
        <ng-template
          nzInputAddonAfter
          [fluentTemplateOutlet]="addonAfter"
          [fluentTemplateOutletContext]="{ control, schema, model }"
          >{{ addonAfter }}</ng-template
        >
      }
      @if (prefix) {
        <ng-template
          nzInputPrefix
          [fluentTemplateOutlet]="prefix"
          [fluentTemplateOutletContext]="{ control, schema, model }"
          >{{ prefix }}</ng-template
        >
      }
      @if (suffix) {
        <ng-template
          nzInputSuffix
          [fluentTemplateOutlet]="suffix"
          [fluentTemplateOutletContext]="{ control, schema, model }"
          >{{ suffix }}</ng-template
        >
      }
    </nz-input-number>
  }
</ng-template>
